openapi: 3.0.2
info:
  title: NetXMS REST API
  description: Documentation for NetXMS REST API
  version: '5.0'
  license:
    name: GNU Free Documentation License
    url: https://www.gnu.org/licenses/fdl-1.3.html
servers:
  - url: http://127.0.0.1:8000
security:
  - BasicAuth: []
  - CookieAuth: []
  - SessionHeader: []
tags:
  - name: API Info
    description: API version and health check endpoints
  - name: Authentication
    description: Session management and authentication
  - name: Objects
    description: Object management operations
  - name: Alarms
    description: Alarm management and monitoring
  - name: Data Collection
    description: DCI configuration and data retrieval
  - name: Business Services
    description: Business service checks, tickets, and uptime
  - name: Users
    description: User and group management
  - name: Events
    description: Event sending
  - name: Notifications
    description: Notification management
  - name: Object Tools
    description: Object tool execution
  - name: Polls
    description: Object polling operations
  - name: Network Map
    description: Network map access management
  - name: Search
    description: Search operations
  - name: Persistent Storage
    description: Persistent storage key-value management
  - name: Summary Tables
    description: Ad-hoc summary table queries
  - name: Graphs
    description: Predefined graph management

paths:
  /:
    get:
      operationId: getRootInfo
      summary: Check API connection
      description: Returns basic API information. Does not require authentication.
      security: []
      responses:
        '200':
          description: API is available
          content:
            application/json:
              schema:
                type: object
                properties:
                  description:
                    type: string
                  version:
                    type: string
                  build:
                    type: string
              example:
                description: "NetXMS web service API version 5.0"
                version: "5.0"
                build: "5.0-1-g20c122be56"
      tags:
        - API Info

  /info:
    get:
      operationId: getApiInfo
      summary: Get API information
      description: Returns detailed API version information. Does not require authentication.
      security: []
      responses:
        '200':
          description: API information
          content:
            application/json:
              schema:
                type: object
                properties:
                  apiVersion:
                    type: string
                    description: API version number
                  build:
                    type: string
                    description: Build tag
                  clientVersion:
                    type: string
                    description: Client library version
              example:
                apiVersion: "2"
                build: "5.0-1-g20c122be56"
                clientVersion: "5.0"
      tags:
        - API Info

  /sessions:
    post:
      operationId: createSession
      summary: Create REST API session
      description: |
        Creates a new session and returns session credentials.
        On success, the server sets a `session_handle` cookie and returns a JSON object with session GUID and server information.

        For subsequent requests, provide the session GUID either:
        - In the `Session-Id` request header
        - Via the `session_handle` cookie

        Authentication can also be provided via HTTP Basic Authentication header instead of JSON body.
      security: []
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                login:
                  type: string
                  description: Username
                password:
                  type: string
                  description: Password
                attachNotificationHandler:
                  type: boolean
                  description: If true, attaches notification handler to receive alarm notifications
                  default: false
            example:
              login: admin
              password: netxms
      responses:
        '200':
          description: Session created successfully
          headers:
            Set-Cookie:
              schema:
                type: string
              example: session_handle=f89b60cd-e6b7-4cc6-9b06-292405f09b17; Path=/
            Session-Id:
              schema:
                type: string
              description: Session GUID for use in subsequent requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionToken'
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Authentication

  /sessions/{sid}:
    get:
      operationId: getSession
      summary: Get session information
      description: Returns information about the current session. Use "self" as sid to get current session info.
      parameters:
        - name: sid
          in: path
          required: true
          description: Session ID or "self" for current session
          schema:
            type: string
      responses:
        '200':
          description: Session information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NXCSession'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Authentication

    delete:
      operationId: deleteSession
      summary: Logout / Delete session
      description: Terminates the specified session. Use "self" to logout current session.
      parameters:
        - name: sid
          in: path
          required: true
          description: Session ID to logout, or "self" for current session
          schema:
            type: string
      responses:
        '200':
          description: Session terminated successfully
          content:
            application/json:
              schema:
                type: object
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Authentication

  /authenticate:
    post:
      operationId: externalAuthentication
      summary: Validate credentials
      description: |
        Validates credentials without creating a session.
        Returns 200 if credentials are valid, 400 if missing parameters, 401 if invalid.
        Useful for external authentication integration.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - login
                - password
              properties:
                login:
                  type: string
                password:
                  type: string
            example:
              login: admin
              password: netxms
      responses:
        '200':
          description: Credentials are valid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Authentication

  /objects:
    get:
      operationId: getObjects
      summary: Get objects with filters
      description: |
        Returns all objects available to the current user, optionally filtered.
        Supports filtering by name, class, parent, zone, geographical area, state, and custom attributes.
      parameters:
        - name: area
          in: query
          description: 'Geographical area filter as "lat1,lon1,lat2,lon2" (bounding box)'
          schema:
            type: string
        - name: class
          in: query
          description: Comma-separated list of object class names (e.g., "Node,Container")
          schema:
            type: string
        - name: name
          in: query
          description: Name filter (glob pattern or regex if regex=true)
          schema:
            type: string
        - name: parent
          in: query
          description: Filter objects that are children of given parent object ID
          schema:
            type: integer
            format: int64
        - name: primaryName
          in: query
          description: Filter nodes by primary name (glob pattern or regex if regex=true)
          schema:
            type: string
        - name: state
          in: query
          description: Filter nodes by state flags (integer or hex with 0x prefix)
          schema:
            type: string
        - name: topLevelOnly
          in: query
          description: Return only top-level objects
          schema:
            type: boolean
            default: false
        - name: regex
          in: query
          description: Treat name and custom attribute filters as regex patterns
          schema:
            type: boolean
            default: false
        - name: zone
          in: query
          description: Comma-separated list of zone UINs
          schema:
            type: string
        - name: '@{attributeName}'
          in: query
          description: 'Custom attribute filter. Use @attributeName=value format'
          schema:
            type: string
      responses:
        '200':
          description: List of objects
          content:
            application/json:
              schema:
                type: object
                properties:
                  objects:
                    type: array
                    items:
                      $ref: '#/components/schemas/AbstractObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

    post:
      operationId: createObject
      summary: Create new object
      description: Creates a new object with the specified parameters
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObjectCreationData'
            examples:
              CreateNode:
                summary: Create a node
                value:
                  objectType: 2
                  name: "testNode"
                  parentId: 2
                  primaryName: "10.5.0.12"
              CreateContainer:
                summary: Create a container
                value:
                  objectType: 5
                  name: "New container"
                  parentId: 2
      responses:
        '200':
          description: Object created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                    format: int64
                    description: ID of the created object
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}:
    get:
      operationId: getObject
      summary: Get object by ID
      description: Returns detailed information about a specific object
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: Object information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbstractObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
        '404':
          $ref: '#/components/responses/ObjectNotFound'
      tags:
        - Objects

    put:
      operationId: updateObject
      summary: Update object
      description: |
        Updates object properties. Only provided fields are updated.
        Array fields are replaced entirely (not merged).
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ObjectModificationData'
            example:
              customAttributes:
                "test attr":
                  value: "new value"
      responses:
        '200':
          description: Object updated successfully
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
        '404':
          $ref: '#/components/responses/ObjectNotFound'
      tags:
        - Objects

    delete:
      operationId: deleteObject
      summary: Delete object
      description: Deletes the specified object
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: Object deleted successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
        '404':
          $ref: '#/components/responses/ObjectNotFound'
      tags:
        - Objects

  /objects/{object-id}/set-maintenance:
    post:
      operationId: setMaintenanceState
      summary: Set object maintenance state
      description: Enters or leaves maintenance mode for the specified object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - maintenance
              properties:
                maintenance:
                  type: boolean
                  description: true to enter maintenance, false to leave
                comments:
                  type: string
                  description: Optional maintenance comment
            example:
              maintenance: true
              comments: "Scheduled maintenance window"
      responses:
        '200':
          description: Maintenance state changed
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/set-managed:
    post:
      operationId: setManagedState
      summary: Set object managed state
      description: Sets object to managed or unmanaged state
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - managed
              properties:
                managed:
                  type: boolean
                  description: true for managed, false for unmanaged
            example:
              managed: true
      responses:
        '200':
          description: Management state changed
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/bind:
    post:
      operationId: bindObject
      summary: Bind child object
      description: Binds the specified child object to this object (this object becomes parent)
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  format: int64
                  description: ID of the child object to bind
            example:
              id: 123
      responses:
        '200':
          description: Object bound successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/bind-to:
    post:
      operationId: bindToObject
      summary: Bind this object to parent
      description: Binds this object as a child to the specified parent object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  format: int64
                  description: ID of the parent object
            example:
              id: 456
      responses:
        '200':
          description: Object bound successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/unbind:
    post:
      operationId: unbindObject
      summary: Unbind child object
      description: Unbinds the specified child object from this object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  format: int64
                  description: ID of the child object to unbind
            example:
              id: 123
      responses:
        '200':
          description: Object unbound successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/unbind-from:
    post:
      operationId: unbindFromObject
      summary: Unbind this object from parent
      description: Unbinds this object from the specified parent object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  format: int64
                  description: ID of the parent object
            example:
              id: 456
      responses:
        '200':
          description: Object unbound successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/change-zone:
    post:
      operationId: changeObjectZone
      summary: Change object zone
      description: Moves the object to a different zone
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - zoneUIN
              properties:
                zoneUIN:
                  type: integer
                  description: Target zone UIN
            example:
              zoneUIN: 1
      responses:
        '200':
          description: Zone changed successfully
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Objects

  /objects/{object-id}/anonymous-access:
    get:
      operationId: getAnonymousAccessToken
      summary: Get network map anonymous access token
      description: Returns the anonymous access token for the network map (if enabled)
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: Access token
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Network Map

    post:
      operationId: enableAnonymousAccess
      summary: Enable anonymous access to network map
      description: Enables anonymous access for the network map and returns the access token
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: Access token generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
              example:
                token: "5nohhaskul6kccbs2nobod2fiexnybkn"
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Network Map

  /objects/{object-id}/data-collection:
    get:
      operationId: getDataCollectionConfiguration
      summary: List DCIs for object
      description: Returns all data collection items configured for the object
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: dciName
          in: query
          description: Filter by DCI name (case-insensitive substring match)
          schema:
            type: string
        - name: dciNameRegexp
          in: query
          description: Filter by DCI name (regex pattern)
          schema:
            type: string
        - name: dciDescription
          in: query
          description: Filter by DCI description (case-insensitive substring match)
          schema:
            type: string
        - name: dciDescriptionRegexp
          in: query
          description: Filter by DCI description (regex pattern)
          schema:
            type: string
      responses:
        '200':
          description: List of data collection objects
          content:
            application/json:
              schema:
                type: object
                properties:
                  dataCollectionObjects:
                    type: array
                    items:
                      $ref: '#/components/schemas/DataCollectionObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

    post:
      operationId: createDci
      summary: Create new DCI
      description: Creates a new data collection item on the object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataCollectionObject'
      responses:
        '200':
          description: DCI created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: array
                    items:
                      type: integer
                      format: int64
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/{dci-id}:
    get:
      operationId: getDci
      summary: Get DCI details
      description: Returns detailed information about a specific DCI
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
      responses:
        '200':
          description: DCI details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataCollectionObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

    put:
      operationId: updateDci
      summary: Update DCI
      description: Updates an existing data collection item
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataCollectionObject'
      responses:
        '200':
          description: DCI updated
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

    delete:
      operationId: deleteDci
      summary: Delete DCI
      description: Deletes the specified data collection item
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
      responses:
        '200':
          description: DCI deleted
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/set-status:
    post:
      operationId: setDciStatus
      summary: Change DCI status
      description: Enables or disables multiple DCIs
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: command
          in: query
          required: true
          description: 'Command: "disable" or "activate"'
          schema:
            type: string
            enum: [disable, activate]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - dcis
              properties:
                dcis:
                  type: array
                  items:
                    type: integer
                    format: int64
                  description: Array of DCI IDs
            example:
              dcis: [345383, 345384]
      responses:
        '200':
          description: Status changed
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/{dci-id}/force-poll:
    post:
      operationId: forcePollDci
      summary: Force poll DCI
      description: Initiates an immediate poll for the specified DCI
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
            example: {}
      responses:
        '200':
          description: Poll initiated
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/{dci-id}/last-value:
    get:
      operationId: getDciLastValue
      summary: Get DCI last value
      description: Returns the most recent value for the specified DCI
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
        - name: rowsAsObjects
          in: query
          description: For table DCIs, return rows as objects with column names as keys
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: Last value
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DciLastValue'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/{dci-id}/values:
    get:
      operationId: getDciHistoricalData
      summary: Get DCI historical data
      description: |
        Returns historical data for the specified DCI.
        Time range can be specified using from/to timestamps, timeInterval, or itemCount.
        If no parameters provided, returns last hour of data.
      parameters:
        - $ref: '#/components/parameters/objectId'
        - $ref: '#/components/parameters/dciId'
        - name: from
          in: query
          description: Start timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: to
          in: query
          description: End timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: timeInterval
          in: query
          description: Time interval in seconds (alternative to from/to)
          schema:
            type: integer
        - name: itemCount
          in: query
          description: Maximum number of items to return
          schema:
            type: integer
        - name: outputFormat
          in: query
          description: 'For table DCIs: "RowColumn", "ColumnRow", or "InstanceColumnRow"'
          schema:
            type: string
            enum: [RowColumn, ColumnRow, InstanceColumnRow]
      responses:
        '200':
          description: Historical data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataSeries'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/data-collection/query:
    get:
      operationId: queryDci
      summary: Search DCIs
      description: |
        Searches for DCIs matching the query criteria.
        Query parameters are combined into a search string.
        Use "query" parameter for free-text search or specific field:value pairs.
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: query
          in: query
          description: Free-text search query
          schema:
            type: string
      responses:
        '200':
          description: Matching DCIs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DciValue'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/last-values:
    get:
      operationId: getLastValues
      summary: Get all last values for object
      description: |
        Returns last values for all DCIs on the object.
        If the object is not a data collection target, returns values from all child objects that are data collection targets.
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: dciName
          in: query
          description: Filter by DCI name (case-insensitive substring match)
          schema:
            type: string
        - name: dciNameRegexp
          in: query
          description: Filter by DCI name (regex pattern)
          schema:
            type: string
        - name: dciDescription
          in: query
          description: Filter by DCI description (case-insensitive substring match)
          schema:
            type: string
        - name: dciDescriptionRegexp
          in: query
          description: Filter by DCI description (regex pattern)
          schema:
            type: string
      responses:
        '200':
          description: Last values
          content:
            application/json:
              schema:
                type: object
                properties:
                  lastValues:
                    type: array
                    items:
                      type: array
                      items:
                        $ref: '#/components/schemas/DciValue'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /objects/{object-id}/polls:
    post:
      operationId: executePoll
      summary: Execute object poll
      description: |
        Initiates a poll on the object. Returns a UUID to track poll output.
        Poll types: autobind, configuration, "configuration full", discovery, interface, status, topology
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
              properties:
                type:
                  type: string
                  description: Poll type
                  enum: [autobind, configuration, "configuration full", "configuration with reset", discovery, interface, status, topology]
            example:
              type: "status"
      responses:
        '200':
          description: Poll started
          content:
            application/json:
              schema:
                type: object
                properties:
                  UUID:
                    type: string
                    format: uuid
                  type:
                    type: string
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Polls

  /objects/{object-id}/polls/output/{id}:
    get:
      operationId: getPollOutput
      summary: Get poll output
      description: Returns the output of a previously started poll
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: id
          in: path
          required: true
          description: Poll UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Poll output
          content:
            application/json:
              schema:
                type: object
                properties:
                  output:
                    type: string
                  completed:
                    type: boolean
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Polls

    post:
      operationId: pollWithOutput
      summary: Poll with output streaming
      description: Executes poll and returns output stream
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: id
          in: path
          required: true
          description: Poll UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Poll output
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Polls

  /objects/{object-id}/object-tools:
    get:
      operationId: getObjectTools
      summary: List object tools
      description: Returns available object tools for the specified object (must be a node)
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: Object tool tree
          content:
            application/json:
              schema:
                type: object
                properties:
                  root:
                    $ref: '#/components/schemas/ObjectToolFolder'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Object Tools

    post:
      operationId: executeObjectTool
      summary: Execute object tool
      description: Executes an object tool on the specified object
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - toolData
              properties:
                toolData:
                  type: object
                  required:
                    - id
                  properties:
                    id:
                      type: integer
                      description: Object tool ID
                    inputFields:
                      type: array
                      items:
                        type: string
                      description: Input field values as "value;fieldName" pairs
                    maskedInputFields:
                      type: array
                      items:
                        type: string
                      description: Names of fields that should be masked
            example:
              toolData:
                id: 1
                inputFields: ["value1;field1", "value2;field2"]
      responses:
        '200':
          description: Tool execution started
          content:
            application/json:
              schema:
                type: object
                properties:
                  UUID:
                    type: string
                    format: uuid
                  toolId:
                    type: integer
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Object Tools

  /objects/{object-id}/object-tools/output/{id}:
    get:
      operationId: getObjectToolOutput
      summary: Get object tool output
      description: Returns the output of a previously executed object tool
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: id
          in: path
          required: true
          description: Tool execution UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tool output
          content:
            application/json:
              schema:
                type: object
                properties:
                  output:
                    type: string
                  completed:
                    type: boolean
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Object Tools

    post:
      operationId: streamObjectToolOutput
      summary: Stream object tool output
      description: Streams the output of a running object tool
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: id
          in: path
          required: true
          description: Tool execution UUID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Tool output stream
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Object Tools

  /objects/{object-id}/checks:
    get:
      operationId: getBusinessServiceChecks
      summary: List business service checks
      description: Returns all checks for the business service
      parameters:
        - $ref: '#/components/parameters/objectId'
      responses:
        '200':
          description: List of checks
          content:
            application/json:
              schema:
                type: object
                properties:
                  checks:
                    type: array
                    items:
                      $ref: '#/components/schemas/BusinessServiceCheck'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

    post:
      operationId: createBusinessServiceCheck
      summary: Create business service check
      description: Creates a new check for the business service
      parameters:
        - $ref: '#/components/parameters/objectId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessServiceCheck'
      responses:
        '200':
          description: Check created
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

  /objects/{object-id}/checks/{check-id}:
    get:
      operationId: getBusinessServiceCheck
      summary: Get business service check
      description: Returns details of a specific check
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: check-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Check details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessServiceCheck'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

    put:
      operationId: updateBusinessServiceCheck
      summary: Update business service check
      description: Updates an existing check
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: check-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BusinessServiceCheck'
      responses:
        '200':
          description: Check updated
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

    delete:
      operationId: deleteBusinessServiceCheck
      summary: Delete business service check
      description: Deletes the specified check
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: check-id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Check deleted
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

  /objects/{object-id}/tickets:
    get:
      operationId: getBusinessServiceTickets
      summary: Get business service tickets
      description: Returns service tickets within the specified time period
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: start
          in: query
          description: Period start timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: end
          in: query
          description: Period end timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: timeRage
          in: query
          description: Time range (used with timeUnit)
          schema:
            type: integer
        - name: timeUnit
          in: query
          description: 'Time unit: MINUTE, HOUR, or DAY'
          schema:
            type: string
            enum: [MINUTE, HOUR, DAY]
      responses:
        '200':
          description: Service tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  tickets:
                    type: array
                    items:
                      $ref: '#/components/schemas/BusinessServiceTicket'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

  /objects/{object-id}/uptime:
    get:
      operationId: getBusinessServiceUptime
      summary: Get business service uptime
      description: Returns service availability percentage for the specified time period
      parameters:
        - $ref: '#/components/parameters/objectId'
        - name: start
          in: query
          description: Period start timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: end
          in: query
          description: Period end timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: timeRage
          in: query
          description: Time range (used with timeUnit)
          schema:
            type: integer
        - name: timeUnit
          in: query
          description: 'Time unit: MINUTE, HOUR, or DAY'
          schema:
            type: string
            enum: [MINUTE, HOUR, DAY]
      responses:
        '200':
          description: Uptime percentage
          content:
            application/json:
              schema:
                type: object
                properties:
                  uptime:
                    type: number
                    format: double
                    description: Availability percentage (0-100)
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Business Services

  /alarms:
    get:
      operationId: getAlarms
      summary: List alarms
      description: |
        Returns alarms with optional filtering.
        Supports filtering by object, state, time range, key, and message.
      parameters:
        - name: objectId
          in: query
          description: Filter by source object ID
          schema:
            type: integer
            format: int64
        - name: objectGuid
          in: query
          description: Filter by source object GUID
          schema:
            type: string
            format: uuid
        - name: includeChildObjects
          in: query
          description: Include alarms from child objects
          schema:
            type: boolean
            default: false
        - name: state
          in: query
          description: 'Comma-separated states: outstanding, acknowledged, resolved, terminated (or 0-3)'
          schema:
            type: string
        - name: createdBefore
          in: query
          description: Filter alarms created before timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: createdAfter
          in: query
          description: Filter alarms created after timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: updatedBefore
          in: query
          description: Filter alarms updated before timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: updatedAfter
          in: query
          description: Filter alarms updated after timestamp (Unix epoch seconds)
          schema:
            type: integer
            format: int64
        - name: key
          in: query
          description: Filter by alarm key (glob pattern)
          schema:
            type: string
        - name: keyRegex
          in: query
          description: Filter by alarm key (regex pattern)
          schema:
            type: string
        - name: message
          in: query
          description: Filter by alarm message (regex pattern)
          schema:
            type: string
        - name: resolveReferences
          in: query
          description: Include resolved object, user, and event template references
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: List of alarms
          content:
            application/json:
              schema:
                type: object
                properties:
                  alarms:
                    type: array
                    items:
                      $ref: '#/components/schemas/Alarm'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

    post:
      operationId: changeAlarmState
      summary: Change alarm state
      description: Performs bulk operations on alarms (terminate, acknowledge, resolve)
      parameters:
        - name: command
          in: query
          required: true
          description: Command to execute
          schema:
            type: string
            enum: [terminate, acknowledge, sticky_acknowledge, resolve]
        - name: timeout
          in: query
          description: Timeout for sticky_acknowledge (seconds)
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - alarms
              properties:
                alarms:
                  type: array
                  items:
                    type: integer
                    format: int64
                  description: Array of alarm IDs
                timeout:
                  type: integer
                  description: Alternative to query parameter for sticky_acknowledge timeout
            example:
              alarms: [345383, 345384]
      responses:
        '200':
          description: Operation completed
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

  /alarms/{alarm-id}:
    get:
      operationId: getAlarm
      summary: Get alarm by ID
      description: Returns detailed information about a specific alarm including resolved references
      parameters:
        - $ref: '#/components/parameters/alarmId'
      responses:
        '200':
          description: Alarm details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Alarm'
        '401':
          $ref: '#/components/responses/AccessDenied'
        '404':
          description: Alarm not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      tags:
        - Alarms

  /alarms/{alarm-id}/comments:
    get:
      operationId: getAlarmComments
      summary: Get alarm comments
      description: Returns all comments for the specified alarm
      parameters:
        - $ref: '#/components/parameters/alarmId'
      responses:
        '200':
          description: List of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/AlarmComment'
              example:
                comments:
                  - id: 1
                    alarmId: 346802
                    userId: 1
                    userName: "admin"
                    lastChangeTime: 1677587409
                    text: "comment text"
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

    post:
      operationId: createAlarmComment
      summary: Create alarm comment
      description: Adds a new comment to the alarm
      parameters:
        - $ref: '#/components/parameters/alarmId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
                  description: Comment text
            example:
              text: "Investigation in progress"
      responses:
        '200':
          description: Comment created
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

  /alarms/{alarm-id}/comments/{comment-id}:
    get:
      operationId: getAlarmComment
      summary: Get alarm comment
      description: Returns a specific comment by ID
      parameters:
        - $ref: '#/components/parameters/alarmId'
        - $ref: '#/components/parameters/alarmCommentId'
      responses:
        '200':
          description: Comment details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AlarmComment'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

    put:
      operationId: updateAlarmComment
      summary: Update alarm comment
      description: Updates an existing comment
      parameters:
        - $ref: '#/components/parameters/alarmId'
        - $ref: '#/components/parameters/alarmCommentId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - text
              properties:
                text:
                  type: string
            example:
              text: "Updated comment text"
      responses:
        '200':
          description: Comment updated
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

    delete:
      operationId: deleteAlarmComment
      summary: Delete alarm comment
      description: Deletes the specified comment
      parameters:
        - $ref: '#/components/parameters/alarmId'
        - $ref: '#/components/parameters/alarmCommentId'
      responses:
        '200':
          description: Comment deleted
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Alarms

  /events:
    post:
      operationId: sendEvent
      summary: Send event
      description: Sends an event to the server
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                eventCode:
                  type: integer
                  format: int64
                  description: Event code (alternative to eventName)
                eventName:
                  type: string
                  description: Event name (alternative to eventCode)
                objectId:
                  type: integer
                  format: int64
                  description: Source object ID
                parameters:
                  type: array
                  items:
                    type: string
                  description: Event parameters
                userTag:
                  type: string
                  description: User tag
                originTimestamp:
                  type: integer
                  format: int64
                  description: Origin timestamp (Unix epoch seconds)
            example:
              eventName: "SYS_NODE_CRITICAL"
              objectId: 123
              parameters: ["parameter1", "parameter2"]
      responses:
        '200':
          description: Event sent
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Events

  /users:
    get:
      operationId: getUsers
      summary: List users and groups
      description: Returns all users and groups in the user database
      parameters:
        - name: type
          in: query
          description: 'Filter by type: "user", "group", or "any"'
          schema:
            type: string
            enum: [user, group, any]
        - name: name
          in: query
          description: Filter by name (glob pattern)
          schema:
            type: string
      responses:
        '200':
          description: List of users/groups
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/AbstractUserObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Users

  /users/{user-id}:
    get:
      operationId: getUser
      summary: Get user by ID
      description: Returns user details. Use "self" to get current user.
      parameters:
        - name: user-id
          in: path
          required: true
          description: User ID, GUID, or "self"
          schema:
            type: string
      responses:
        '200':
          description: User details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbstractUserObject'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Users

  /users/{user-id}/password:
    post:
      operationId: changePassword
      summary: Change user password
      description: Changes password for the specified user. Use "self" for current user.
      parameters:
        - name: user-id
          in: path
          required: true
          description: User ID, GUID, or "self"
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - newPassword
              properties:
                oldPassword:
                  type: string
                  description: Current password (required when changing own password)
                newPassword:
                  type: string
                  description: New password
            example:
              oldPassword: "currentPassword"
              newPassword: "newSecurePassword123"
      responses:
        '200':
          description: Password changed
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Users

  /notifications:
    get:
      operationId: getNotifications
      summary: Poll session notifications
      description: |
        Long-polls for session notifications. Blocks for up to 60 seconds waiting for notifications.
        Requires attachNotificationHandler=true when creating session.
      responses:
        '200':
          description: Notifications received
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/SessionNotification'
        '401':
          $ref: '#/components/responses/AccessDenied'
        '408':
          description: Timeout - no notifications within 60 seconds
      tags:
        - Notifications

  /user-agent-notifications:
    get:
      operationId: getUserAgentNotifications
      summary: Get user agent notifications
      description: Returns all user agent notifications
      responses:
        '200':
          description: List of notifications
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      type: object
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Notifications

    post:
      operationId: createUserAgentNotification
      summary: Create user agent notification
      description: Creates a new user agent notification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - message
                - objects
              properties:
                message:
                  type: string
                  description: Notification message
                objects:
                  type: array
                  items:
                    type: integer
                    format: int64
                  description: Target object IDs
                startTime:
                  type: integer
                  format: int64
                  description: Start time (Unix epoch seconds)
                endTime:
                  type: integer
                  format: int64
                  description: End time (Unix epoch seconds)
                onStartup:
                  type: boolean
                  description: Show on startup
                  default: false
            example:
              message: "Scheduled maintenance tonight"
              objects: [1, 2, 3]
              startTime: 1677600000
              endTime: 1677686400
      responses:
        '200':
          description: Notification created
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Notifications

  /find/mac-address:
    get:
      operationId: findMacAddress
      summary: Find MAC address
      description: Searches for MAC address connections in the network
      parameters:
        - name: macAddress
          in: query
          required: true
          description: MAC address or prefix to search for
          schema:
            type: string
        - name: searchLimit
          in: query
          description: Maximum number of results (default 100)
          schema:
            type: integer
            default: 100
        - name: includeObjects
          in: query
          description: Include object information in response
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    localMacAddress:
                      type: string
                    localNodeId:
                      type: integer
                      format: int64
                    localInterfaceId:
                      type: integer
                      format: int64
                    localIpAddress:
                      type: string
                    type:
                      type: string
                    nodeId:
                      type: integer
                      format: int64
                    interfaceId:
                      type: integer
                      format: int64
                    interfaceIndex:
                      type: integer
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Search

  /persistent-storage:
    get:
      operationId: getPersistentStorage
      summary: List persistent storage entries
      description: Returns all key-value pairs in persistent storage
      responses:
        '200':
          description: Storage entries
          content:
            application/json:
              schema:
                type: object
                properties:
                  persistentstorage:
                    type: object
                    additionalProperties:
                      type: string
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Persistent Storage

    post:
      operationId: createPersistentStorageEntry
      summary: Create persistent storage entry
      description: Creates a new key-value pair in persistent storage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - key
                - value
              properties:
                key:
                  type: string
                value:
                  type: string
            example:
              key: "myKey"
              value: "myValue"
      responses:
        '200':
          description: Entry created
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Persistent Storage

  /persistent-storage/{key}:
    get:
      operationId: getPersistentStorageEntry
      summary: Get persistent storage entry
      description: Returns the value for the specified key
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Entry value
          content:
            application/json:
              schema:
                type: object
                properties:
                  value:
                    type: string
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Persistent Storage

    put:
      operationId: updatePersistentStorageEntry
      summary: Update persistent storage entry
      description: Updates the value for the specified key
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - value
              properties:
                value:
                  type: string
            example:
              value: "newValue"
      responses:
        '200':
          description: Entry updated
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Persistent Storage

    delete:
      operationId: deletePersistentStorageEntry
      summary: Delete persistent storage entry
      description: Deletes the specified key-value pair
      parameters:
        - name: key
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Entry deleted
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Persistent Storage

  /predefined-graphs:
    get:
      operationId: getPredefinedGraphs
      summary: List predefined graphs
      description: Returns the tree of predefined graphs
      responses:
        '200':
          description: Graph tree
          content:
            application/json:
              schema:
                type: object
                properties:
                  root:
                    $ref: '#/components/schemas/GraphFolder'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Graphs

  /push-data:
    post:
      operationId: pushDciData
      summary: Push DCI data
      description: Pushes DCI values to the server
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/DciPushData'
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '#/components/schemas/DciPushData'
            examples:
              singleValue:
                summary: Push single value
                value:
                  nodeId: 123
                  dciId: 456
                  value: "42"
              multipleValues:
                summary: Push multiple values
                value:
                  data:
                    - nodeId: 123
                      dciId: 456
                      value: "42"
                    - nodeId: 123
                      dciId: 457
                      value: "100"
      responses:
        '200':
          description: Data pushed
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Data Collection

  /summary-table/ad-hoc:
    post:
      operationId: queryAdHocSummaryTable
      summary: Query ad-hoc summary table
      description: Executes an ad-hoc DCI summary table query
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - baseObject
                - columns
              properties:
                baseObject:
                  oneOf:
                    - type: integer
                      format: int64
                    - type: string
                  description: Base object ID or name
                columns:
                  type: array
                  items:
                    type: object
                    properties:
                      columnName:
                        type: string
                        description: Display column name
                      dciName:
                        type: string
                        description: DCI name pattern
                      isRegexp:
                        type: boolean
                        description: Treat dciName as regex
                        default: false
                      useRegexp:
                        type: boolean
                        description: Alias for isRegexp
                        default: false
                      matchByDescription:
                        type: boolean
                        description: Match by description instead of name
                        default: false
                aggregationFunction:
                  type: string
                  description: Aggregation function
                  enum: [LAST, MIN, MAX, AVG, SUM]
                startDate:
                  type: integer
                  format: int64
                  description: Start date (Unix epoch seconds)
                endDate:
                  type: integer
                  format: int64
                  description: End date (Unix epoch seconds)
                multiInstance:
                  type: boolean
                  default: true
            example:
              baseObject: "Infrastructure Services"
              columns:
                - columnName: "CPU Usage"
                  dciName: "System.CPU.Usage"
                - columnName: "Memory Used"
                  dciName: "System.Memory.Physical.Used"
      responses:
        '200':
          description: Summary table results
          content:
            application/json:
              schema:
                type: object
                properties:
                  table:
                    type: object
                    properties:
                      columns:
                        type: array
                        items:
                          type: string
                      rows:
                        type: array
                        items:
                          type: array
                          items:
                            type: string
        '400':
          $ref: '#/components/responses/InvalidRequest'
        '401':
          $ref: '#/components/responses/AccessDenied'
      tags:
        - Summary Tables

components:
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
      description: HTTP Basic Authentication with NetXMS username and password
    CookieAuth:
      type: apiKey
      in: cookie
      name: session_handle
      description: Session cookie set after successful login
    SessionHeader:
      type: apiKey
      in: header
      name: Session-Id
      description: Session ID header

  parameters:
    objectId:
      name: object-id
      in: path
      required: true
      description: Object ID or GUID
      schema:
        type: string
    dciId:
      name: dci-id
      in: path
      required: true
      description: DCI ID or name
      schema:
        type: string
    alarmId:
      name: alarm-id
      in: path
      required: true
      description: Alarm ID
      schema:
        type: integer
        format: int64
    alarmCommentId:
      name: comment-id
      in: path
      required: true
      description: Comment ID
      schema:
        type: integer
        format: int64

  responses:
    AccessDenied:
      description: Access denied
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 2
            description: "Access denied"
    InvalidRequest:
      description: Invalid request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 59
            description: "Invalid argument"
    ObjectNotFound:
      description: Object not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: 3
            description: "Invalid object ID"

  schemas:
    ErrorResponse:
      type: object
      properties:
        error:
          type: integer
          description: Error code
        description:
          type: string
          description: Error description

    SuccessResponse:
      type: object
      properties:
        error:
          type: integer
          example: 0
        description:
          type: string
          example: "Request completed successfully"

    SessionToken:
      type: object
      properties:
        sessionHandle:
          type: string
          format: uuid
          description: Session GUID for use in Session-Id header
        session:
          $ref: '#/components/schemas/NXCSession'

    NXCSession:
      type: object
      properties:
        server:
          type: object
          properties:
            address:
              type: string
            serverName:
              type: string
            version:
              type: string
            color:
              type: string
            id:
              type: integer
              format: int64
            timeZone:
              type: string
        user:
          type: object
          properties:
            name:
              type: string
            id:
              type: integer
            globalAccessRights:
              type: integer
              format: int64
        encrypted:
          type: boolean
        objectsSynchronized:
          type: boolean
        passwordExpired:
          type: boolean
        zoningEnabled:
          type: boolean

    AbstractObject:
      type: object
      properties:
        objectId:
          type: integer
          format: int64
        guid:
          type: string
          format: uuid
        objectName:
          type: string
        alias:
          type: string
        nameOnMap:
          type: string
        objectClass:
          type: integer
        categoryId:
          type: integer
        flags:
          type: integer
        status:
          type: string
          enum: [NORMAL, WARNING, MINOR, MAJOR, CRITICAL, UNKNOWN, UNMANAGED, DISABLED, TESTING]
        isDeleted:
          type: boolean
        inMaintenanceMode:
          type: boolean
        maintenanceInitiatorId:
          type: integer
          format: int64
        comments:
          type: string
        commentsSource:
          type: string
        geolocation:
          $ref: '#/components/schemas/Geolocation'
        postalAddress:
          $ref: '#/components/schemas/PostalAddress'
        mapImage:
          type: string
          format: uuid
        drillDownObjectId:
          type: integer
          format: int64
        trustedObjects:
          type: array
          items:
            type: integer
            format: int64
        inheritAccessRights:
          type: boolean
        accessList:
          type: array
          items:
            $ref: '#/components/schemas/AccessListElement'
        creationTime:
          type: integer
          format: int64
        parents:
          type: array
          items:
            type: integer
            format: int64
        children:
          type: array
          items:
            type: integer
            format: int64
        dashboards:
          type: array
          items:
            type: integer
            format: int64
        customAttributes:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/CustomAttribute'
        urls:
          type: array
          items:
            type: object
        responsibleUsers:
          type: array
          items:
            type: integer
        objectClassName:
          type: string

    ObjectCreationData:
      type: object
      required:
        - objectType
        - name
        - parentId
      properties:
        objectType:
          type: integer
          description: |
            Object type codes:
            - 1: SUBNET
            - 2: NODE
            - 3: INTERFACE
            - 4: NETWORK
            - 5: CONTAINER
            - 6: ZONE
            - 8: TEMPLATE
            - 9: TEMPLATEGROUP
            - 11: NETWORKSERVICE
            - 13: CONDITION
            - 14: CLUSTER
            - 21: NETWORKMAP
            - 23: DASHBOARD
            - 28: BUSINESSSERVICE
            - 32: RACK
            - 35: CHASSIS
            - 37: SENSOR
        name:
          type: string
        parentId:
          type: integer
          format: int64
        comments:
          type: string
        creationFlags:
          type: integer
        primaryName:
          type: string
          description: Node primary name (IP address or DNS name)
        agentPort:
          type: integer
        snmpPort:
          type: integer
        sshPort:
          type: integer
        zoneUIN:
          type: integer
        linkedNodeId:
          type: integer
          format: int64
        template:
          type: boolean
        mapType:
          type: integer

    ObjectModificationData:
      type: object
      properties:
        name:
          type: string
        primaryName:
          type: string
        alias:
          type: string
        nameOnMap:
          type: string
        acl:
          type: array
          items:
            $ref: '#/components/schemas/AccessListElement'
        inheritAccessRights:
          type: boolean
        customAttributes:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/CustomAttribute'
        autoBindFilter:
          type: string
        description:
          type: string
        geolocation:
          $ref: '#/components/schemas/Geolocation'
        postalAddress:
          $ref: '#/components/schemas/PostalAddress'
        objectFlags:
          type: integer
        objectFlagsMask:
          type: integer

    Geolocation:
      type: object
      properties:
        type:
          type: integer
          description: '0: UNSET, 1: MANUAL, 2: GPS, 3: NETWORK'
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        accuracy:
          type: integer
          description: Accuracy in meters
        timestamp:
          type: integer
          format: int64
          description: Unix timestamp

    PostalAddress:
      type: object
      properties:
        country:
          type: string
        region:
          type: string
        city:
          type: string
        district:
          type: string
        streetAddress:
          type: string
        postcode:
          type: string

    AccessListElement:
      type: object
      properties:
        userId:
          type: integer
        accessRights:
          type: integer
          description: |
            Bit flags:
            - 0x00000001: READ
            - 0x00000002: MODIFY
            - 0x00000004: CREATE
            - 0x00000008: DELETE
            - 0x00000010: READ_ALARMS
            - 0x00000020: ACL
            - 0x00000040: UPDATE_ALARMS
            - 0x00000080: SEND_EVENTS
            - 0x00000100: CONTROL
            - 0x00000200: TERM_ALARMS
            - 0x00000400: PUSH_DATA
            - 0x00008000: MAINTENANCE

    CustomAttribute:
      type: object
      properties:
        value:
          type: string
        flags:
          type: integer
          description: '1: INHERITABLE'

    DataCollectionObject:
      type: object
      properties:
        id:
          type: integer
          format: int64
        nodeId:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        status:
          type: integer
        origin:
          type: integer
        dataType:
          type: integer
        pollingInterval:
          type: integer
        retentionTime:
          type: integer
        instanceMethod:
          type: integer

    DciValue:
      type: object
      properties:
        id:
          type: integer
          format: int64
        nodeId:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        value:
          type: string
        timestamp:
          type: integer
          format: int64
        status:
          type: integer
        dataType:
          type: integer
        errorCount:
          type: integer
        activeThresholdSeverity:
          type: integer

    DciLastValue:
      type: object
      properties:
        dciType:
          type: integer
        dataOrigin:
          type: string
        timestamp:
          type: integer
          format: int64
        value:
          type: string
        tableValue:
          type: object

    DataSeries:
      type: object
      properties:
        nodeId:
          type: integer
          format: int64
        dciId:
          type: integer
          format: int64
        values:
          type: array
          items:
            type: object
            properties:
              timestamp:
                type: integer
                format: int64
              value:
                oneOf:
                  - type: string
                  - type: number
                  - type: object

    DciPushData:
      type: object
      properties:
        nodeId:
          type: integer
          format: int64
          description: Target node ID
        nodeName:
          type: string
          description: Target node name (alternative to nodeId)
        dciId:
          type: integer
          format: int64
          description: Target DCI ID
        dciName:
          type: string
          description: Target DCI name (alternative to dciId)
        value:
          type: string
          description: Value to push

    Alarm:
      type: object
      properties:
        id:
          type: integer
          format: int64
        parentId:
          type: integer
          format: int64
        creationTime:
          type: integer
          format: int64
        lastChangeTime:
          type: integer
          format: int64
        sourceObjectId:
          type: integer
          format: int64
        sourceEventCode:
          type: integer
        sourceEventId:
          type: integer
          format: int64
        dciId:
          type: integer
          format: int64
        currentSeverity:
          type: integer
        originalSeverity:
          type: integer
        repeatCount:
          type: integer
        state:
          type: integer
          description: '0: OUTSTANDING, 1: ACKNOWLEDGED, 2: RESOLVED, 3: TERMINATED'
        message:
          type: string
        key:
          type: string
        helpDeskState:
          type: integer
        helpDeskRef:
          type: string
        acknowledgedByUser:
          type: integer
        resolvedByUser:
          type: integer
        terminatedByUser:
          type: integer
        ackTimeout:
          type: integer
        categories:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                format: int64
              name:
                type: string
        sourceObject:
          $ref: '#/components/schemas/AbstractObject'
        sourceEventName:
          type: string
        acknowledgedByUserName:
          type: string
        resolvedByUserName:
          type: string
        terminatedByUserName:
          type: string
        dci:
          $ref: '#/components/schemas/DciValue'
        zoneUIN:
          type: integer
        zoneName:
          type: string

    AlarmComment:
      type: object
      properties:
        id:
          type: integer
          format: int64
        alarmId:
          type: integer
          format: int64
        userId:
          type: integer
        userName:
          type: string
        lastChangeTime:
          type: integer
          format: int64
        text:
          type: string

    BusinessServiceCheck:
      type: object
      properties:
        id:
          type: integer
          format: int64
        type:
          type: integer
        objectId:
          type: integer
          format: int64
        dciId:
          type: integer
          format: int64
        script:
          type: string
        threshold:
          type: integer
        reason:
          type: string
        state:
          type: integer
        description:
          type: string

    BusinessServiceTicket:
      type: object
      properties:
        id:
          type: integer
          format: int64
        serviceId:
          type: integer
          format: int64
        checkId:
          type: integer
          format: int64
        checkDescription:
          type: string
        creationTime:
          type: integer
          format: int64
        closeTime:
          type: integer
          format: int64
        reason:
          type: string

    AbstractUserObject:
      type: object
      properties:
        id:
          type: integer
        guid:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        flags:
          type: integer
        systemRights:
          type: integer
          format: int64
        ldapDn:
          type: string
        ldapId:
          type: string
        created:
          type: integer
          format: int64

    ObjectToolFolder:
      type: object
      properties:
        name:
          type: string
        tools:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                format: int64
              name:
                type: string
              type:
                type: integer
              flags:
                type: integer
        subFolders:
          type: array
          items:
            $ref: '#/components/schemas/ObjectToolFolder'

    GraphFolder:
      type: object
      properties:
        name:
          type: string
        graphs:
          type: array
          items:
            type: object
        subFolders:
          type: array
          items:
            $ref: '#/components/schemas/GraphFolder'

    SessionNotification:
      type: object
      properties:
        code:
          type: integer
        subCode:
          type: integer
        object:
          type: object
